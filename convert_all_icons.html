<!DOCTYPE html>
<html>
<head>
    <title>Claude Status Monitor - SVG to PNG Converter</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            padding: 20px; 
            background-color: #f8f9fa;
        }
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            background: white; 
            padding: 30px; 
            border-radius: 10px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header { 
            text-align: center; 
            margin-bottom: 30px; 
            border-bottom: 2px solid #10B981; 
            padding-bottom: 20px;
        }
        .icon-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); 
            gap: 20px; 
            margin: 20px 0;
        }
        .icon-item { 
            border: 1px solid #e0e0e0; 
            border-radius: 8px; 
            padding: 15px; 
            text-align: center; 
            background: #f8f9fa;
        }
        .icon-preview { 
            margin: 10px 0; 
            display: flex; 
            justify-content: space-around; 
            align-items: center;
        }
        .download-btn { 
            background: #10B981; 
            color: white; 
            border: none; 
            padding: 8px 16px; 
            border-radius: 5px; 
            cursor: pointer; 
            margin: 5px;
        }
        .download-btn:hover { background: #059669; }
        .download-btn:disabled { background: #9CA3AF; cursor: not-allowed; }
        .status { 
            margin: 10px 0; 
            padding: 10px; 
            border-radius: 5px; 
            font-weight: bold;
        }
        .status.success { background: #D1FAE5; color: #065F46; }
        .status.error { background: #FEE2E2; color: #991B1B; }
        .status.processing { background: #FEF3C7; color: #92400E; }
        canvas { border: 1px solid #ddd; margin: 2px; }
        .download-all { 
            text-align: center; 
            margin: 30px 0; 
            padding: 20px; 
            background: #EBF8FF; 
            border-radius: 10px;
        }
        .download-all button { 
            background: #2563EB; 
            color: white; 
            border: none; 
            padding: 12px 24px; 
            border-radius: 5px; 
            cursor: pointer; 
            font-size: 16px;
            margin: 5px;
        }
        .download-all button:hover { background: #1D4ED8; }
        .stats { 
            display: flex; 
            justify-content: space-around; 
            margin: 20px 0; 
            text-align: center;
        }
        .stat { 
            background: #F3F4F6; 
            padding: 15px; 
            border-radius: 8px; 
            min-width: 120px;
        }
        .stat-number { font-size: 24px; font-weight: bold; color: #10B981; }
        .stat-label { font-size: 12px; color: #6B7280; text-transform: uppercase; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé® Claude Status Monitor Icon Converter</h1>
            <p>Convert all SVG icons to PNG format for browser extension use</p>
            <div class="stats">
                <div class="stat">
                    <div class="stat-number" id="totalCount">0</div>
                    <div class="stat-label">Total Icons</div>
                </div>
                <div class="stat">
                    <div class="stat-number" id="convertedCount">0</div>
                    <div class="stat-label">Converted</div>
                </div>
                <div class="stat">
                    <div class="stat-number" id="errorCount">0</div>
                    <div class="stat-label">Errors</div>
                </div>
            </div>
        </div>

        <div class="download-all">
            <h3>üöÄ Quick Actions</h3>
            <button onclick="convertAllIcons()">Convert All Icons to PNG</button>
            <button onclick="downloadAllPNGs()">Download All PNG Files</button>
            <button onclick="checkCoverage()">Check Coverage</button>
        </div>

        <div id="status" class="status" style="display: none;"></div>
        
        <div id="iconGrid" class="icon-grid"></div>
    </div>

    <script>
        const sizes = [16, 32, 48, 128];
        const colors = [
            { name: 'green', hex: '#10B981', label: 'Operational' },
            { name: 'yellow', hex: '#F59E0B', label: 'Minor Issues' },
            { name: 'red', hex: '#EF4444', label: 'Major Issues' },
            { name: 'gray', hex: '#6B7280', label: 'Unknown' }
        ];
        
        let convertedCount = 0;
        let totalCount = 0;
        let errorCount = 0;
        let convertedFiles = [];

        function updateStats() {
            document.getElementById('totalCount').textContent = totalCount;
            document.getElementById('convertedCount').textContent = convertedCount;
            document.getElementById('errorCount').textContent = errorCount;
        }

        function showStatus(message, type = 'processing') {
            const statusDiv = document.getElementById('status');
            statusDiv.textContent = message;
            statusDiv.className = `status ${type}`;
            statusDiv.style.display = 'block';
            
            if (type !== 'processing') {
                setTimeout(() => statusDiv.style.display = 'none', 5000);
            }
        }

        function createBrowserIcon(size, colorName, colorHex) {
            const strokeWidth = Math.max(2, size / 10);
            const center = size / 2;

            return `<svg width="${size}" height="${size}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${size} ${size}">
                <defs>
                    <style>
                        .main-shape { fill: ${colorHex}; }
                        .accent { fill: ${colorHex}; opacity: 0.8; }
                        .indicator { fill: ${colorHex}; opacity: 0.9; }
                    </style>
                </defs>
                
                <!-- Background circle for better visibility -->
                <circle cx="${center}" cy="${center}" r="${center - 1}" 
                        fill="white" stroke="none" opacity="0.1"/>
                
                <g transform="translate(${center}, ${center})">
                    <!-- Main geometric "A" shape inspired by Anthropic -->
                    <path class="main-shape" d="M 0 -${size * 0.32} L ${size * 0.22} -${size * 0.08} L ${size * 0.22} ${size * 0.32} L ${size * 0.11} ${size * 0.32} L ${size * 0.11} ${size * 0.08} L -${size * 0.11} ${size * 0.08} L -${size * 0.11} ${size * 0.32} L -${size * 0.22} ${size * 0.32} L -${size * 0.22} -${size * 0.08} Z"/>
                    
                    <!-- Cross-bar for "A" -->
                    <rect class="accent" x="-${size * 0.16}" y="-${size * 0.06}" 
                          width="${size * 0.32}" height="${Math.max(2, strokeWidth * 0.8)}" rx="1"/>
                    
                    <!-- Status indicator dot -->
                    <circle class="indicator" cx="${size * 0.28}" cy="-${size * 0.28}" r="${Math.max(1.5, strokeWidth * 0.8)}"/>
                    
                    <!-- Subtle connection lines for "monitoring" concept -->
                    <path class="accent" d="M -${size * 0.22} -${size * 0.04} L -${size * 0.35} -${size * 0.18}" 
                          stroke="${colorHex}" stroke-width="${Math.max(1, strokeWidth * 0.4)}" 
                          stroke-linecap="round" fill="none" opacity="0.6"/>
                    <path class="accent" d="M -${size * 0.22} ${size * 0.04} L -${size * 0.35} ${size * 0.18}" 
                          stroke="${colorHex}" stroke-width="${Math.max(1, strokeWidth * 0.4)}" 
                          stroke-linecap="round" fill="none" opacity="0.6"/>
                </g>
            </svg>`;
        }

        async function convertSVGtoPNG(svgContent, size, filename) {
            return new Promise((resolve, reject) => {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = size;
                canvas.height = size;

                const img = new Image();
                img.onload = function() {
                    try {
                        // Clear with transparent background
                        ctx.clearRect(0, 0, size, size);
                        
                        // Draw the SVG
                        ctx.drawImage(img, 0, 0, size, size);
                        
                        canvas.toBlob((blob) => {
                            if (blob) {
                                const url = URL.createObjectURL(blob);
                                convertedFiles.push({ filename, url, blob });
                                resolve({ url, blob });
                            } else {
                                reject(new Error('Failed to create blob'));
                            }
                        }, 'image/png');
                    } catch (error) {
                        reject(error);
                    }
                };
                
                img.onerror = () => reject(new Error('Failed to load SVG'));
                
                const svgBlob = new Blob([svgContent], {type: 'image/svg+xml'});
                const svgUrl = URL.createObjectURL(svgBlob);
                img.src = svgUrl;
            });
        }

        function downloadFile(filename, url) {
            const link = document.createElement('a');
            link.href = url;
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        async function convertIconSet(colorData) {
            const iconItem = document.createElement('div');
            iconItem.className = 'icon-item';
            iconItem.innerHTML = `
                <h4 style="color: ${colorData.hex}">‚óè ${colorData.label} (${colorData.name})</h4>
                <div class="icon-preview" id="preview-${colorData.name}"></div>
                <div id="buttons-${colorData.name}"></div>
            `;
            document.getElementById('iconGrid').appendChild(iconItem);

            const previewDiv = document.getElementById(`preview-${colorData.name}`);
            const buttonsDiv = document.getElementById(`buttons-${colorData.name}`);

            for (let size of sizes) {
                try {
                    const svgContent = createBrowserIcon(size, colorData.name, colorData.hex);
                    const filename = `claude-${colorData.name}-${size}.png`;
                    
                    // Add canvas preview
                    const canvas = document.createElement('canvas');
                    canvas.width = size;
                    canvas.height = size;
                    canvas.style.width = size < 32 ? '32px' : `${size}px`;
                    canvas.style.height = size < 32 ? '32px' : `${size}px`;
                    canvas.title = `${size}x${size}`;
                    previewDiv.appendChild(canvas);

                    const result = await convertSVGtoPNG(svgContent, size, filename);
                    
                    // Draw preview
                    const ctx = canvas.getContext('2d');
                    const img = new Image();
                    img.onload = () => ctx.drawImage(img, 0, 0, size, size);
                    img.src = result.url;

                    // Add download button
                    const btn = document.createElement('button');
                    btn.className = 'download-btn';
                    btn.textContent = `${size}px`;
                    btn.onclick = () => downloadFile(filename, result.url);
                    buttonsDiv.appendChild(btn);

                    convertedCount++;
                } catch (error) {
                    console.error(`Error converting ${colorData.name}-${size}:`, error);
                    errorCount++;
                }
                totalCount++;
                updateStats();
            }
        }

        async function convertAllIcons() {
            showStatus('üîÑ Converting all icons...', 'processing');
            convertedCount = 0;
            errorCount = 0;
            totalCount = 0;
            convertedFiles = [];
            
            document.getElementById('iconGrid').innerHTML = '';

            // Convert colored icons
            for (let colorData of colors) {
                await convertIconSet(colorData);
            }

            // Convert base icons (green)
            const baseIconItem = document.createElement('div');
            baseIconItem.className = 'icon-item';
            baseIconItem.innerHTML = `
                <h4 style="color: #10B981">‚óè Base Icons (default green)</h4>
                <div class="icon-preview" id="preview-base"></div>
                <div id="buttons-base"></div>
            `;
            document.getElementById('iconGrid').appendChild(baseIconItem);

            const basePreviewDiv = document.getElementById('preview-base');
            const baseButtonsDiv = document.getElementById('buttons-base');

            for (let size of sizes) {
                try {
                    const svgContent = createBrowserIcon(size, 'green', '#10B981');
                    const filename = `claude-${size}.png`;
                    
                    const canvas = document.createElement('canvas');
                    canvas.width = size;
                    canvas.height = size;
                    canvas.style.width = size < 32 ? '32px' : `${size}px`;
                    canvas.style.height = size < 32 ? '32px' : `${size}px`;
                    canvas.title = `${size}x${size}`;
                    basePreviewDiv.appendChild(canvas);

                    const result = await convertSVGtoPNG(svgContent, size, filename);
                    
                    const ctx = canvas.getContext('2d');
                    const img = new Image();
                    img.onload = () => ctx.drawImage(img, 0, 0, size, size);
                    img.src = result.url;

                    const btn = document.createElement('button');
                    btn.className = 'download-btn';
                    btn.textContent = `${size}px`;
                    btn.onclick = () => downloadFile(filename, result.url);
                    baseButtonsDiv.appendChild(btn);

                    convertedCount++;
                } catch (error) {
                    console.error(`Error converting base-${size}:`, error);
                    errorCount++;
                }
                totalCount++;
                updateStats();
            }

            if (errorCount === 0) {
                showStatus(`‚úÖ Successfully converted all ${convertedCount} icons!`, 'success');
            } else {
                showStatus(`‚ö†Ô∏è Converted ${convertedCount} icons with ${errorCount} errors`, 'error');
            }
        }

        function downloadAllPNGs() {
            if (convertedFiles.length === 0) {
                showStatus('‚ùå No icons converted yet. Please convert icons first.', 'error');
                return;
            }

            showStatus(`üì• Downloading ${convertedFiles.length} PNG files...`, 'processing');
            
            convertedFiles.forEach((file, index) => {
                setTimeout(() => {
                    downloadFile(file.filename, file.url);
                }, index * 100); // Small delay between downloads
            });

            setTimeout(() => {
                showStatus(`‚úÖ All ${convertedFiles.length} PNG files downloaded!`, 'success');
            }, convertedFiles.length * 100 + 1000);
        }

        function checkCoverage() {
            const expectedFiles = [];
            
            // Base icons
            sizes.forEach(size => {
                expectedFiles.push(`claude-${size}.png`);
            });
            
            // Colored icons
            colors.forEach(color => {
                sizes.forEach(size => {
                    expectedFiles.push(`claude-${color.name}-${size}.png`);
                });
            });

            const coverage = document.createElement('div');
            coverage.innerHTML = `
                <h3>üìä Coverage Report</h3>
                <p><strong>Expected files:</strong> ${expectedFiles.length}</p>
                <p><strong>Generated files:</strong> ${convertedFiles.length}</p>
                <div style="margin-top: 10px; font-family: monospace; font-size: 12px;">
                    ${expectedFiles.map(file => `‚Ä¢ ${file}`).join('<br>')}
                </div>
            `;
            coverage.style.cssText = 'background: #F3F4F6; padding: 15px; border-radius: 8px; margin-top: 20px;';
            
            document.querySelector('.container').appendChild(coverage);
        }

        // Initialize
        updateStats();
        
        // Auto-start conversion
        window.addEventListener('load', () => {
            setTimeout(() => {
                convertAllIcons();
            }, 1000);
        });
    </script>
</body>
</html>